<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>zri.info</title><link rel="icon" type="image/x-icon" href="favicon.ico"><link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7573512423058423" crossorigin="anonymous"></script><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width,initial-scale=1.5,user-scalable=no"><meta name="apple-mobile-web-app-title" content="zri"><link rel="apple-touch-icon" sizes="180x180" href="ICON.jpg"><link rel="apple-touch-icon" sizes="152x152" href="ICON.jpg"><link rel="apple-touch-icon" sizes="167x167" href="ICON.jpg"><link rel="apple-touch-icon" href="/icons/apple-touch-icon-default.png"><link rel="apple-touch-startup-image" href="IMG_0823.jpeg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"><script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script><script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script><style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Roboto',sans-serif;background:linear-gradient(180deg,#0a0a0a 0%,#1a1a2e 100%);min-height:100vh;color:#fff;line-height:1.5;position:relative;overflow-x:hidden;display:flex;flex-direction:column;align-items:center;justify-content:center}body.fade-out{opacity:0;transition:opacity .5s ease}.loading-screen{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);display:flex;align-items:center;justify-content:center;z-index:2000;color:#a259ff;font-size:1.5em;opacity:1;transition:opacity .3s ease}.loading-screen.hiding{opacity:0}.dev-password-prompt{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);display:none;flex-direction:column;align-items:center;justify-content:center;z-index:2000;opacity:1;transition:opacity .3s ease}.dev-password-prompt.hiding{opacity:0;transition:opacity .3s ease}.dev-password-prompt h2{font-size:2em;color:#a259ff;margin-bottom:1rem;text-shadow:0 0 15px rgba(162,89,255,0.7)}.dev-password-prompt p{font-size:1.2em;color:#d0d0d0;max-width:500px;text-align:center;margin-bottom:1rem}.dev-password-prompt input{padding:.6rem 1.2rem;border:none;border-radius:8px;background:#1f1f1f;color:#fff;width:100%;max-width:300px;margin-bottom:1rem;font-family:'Roboto',sans-serif;transition:box-shadow .3s}.dev-password-prompt input:focus{outline:none;box-shadow:0 0 10px rgba(162,89,255,0.5)}.dev-password-prompt .button-container{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:1rem;width:100%;max-width:500px}.dev-password-prompt button{padding:.6rem 1.2rem;background:linear-gradient(135deg,#a259ff 0%,#c084fc 100%);border:none;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;transition:background .3s,transform .3s,box-shadow .3s}.dev-password-prompt button:hover{background:linear-gradient(135deg,#c084fc 0%,#a259ff 100%);transform:scale(1.05);box-shadow:0 2px 15px rgba(162,89,255,0.6)}.dev-password-prompt button:disabled{background:#666;cursor:not-allowed;transform:none;box-shadow:none}.dev-password-prompt .update-tab{padding:.5rem 1rem;background:linear-gradient(135deg,#1f1f1f 0%,#333 100%);border:none;border-radius:8px;color:#fff;font-weight:600;text-decoration:none;font-size:.9em;cursor:pointer;transition:background .3s,transform .3s,box-shadow .3s}.dev-password-prompt .update-tab:hover{background:linear-gradient(135deg,#333 0%,#444 100%);transform:scale(1.05);box-shadow:0 2px 15px rgba(162,89,255,0.6)}.username-prompt{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);display:none;flex-direction:column;align-items:center;justify-content:center;z-index:1000;opacity:1;transition:opacity .3s ease}.username-prompt.hiding{opacity:0;transition:opacity .3s ease}.username-prompt h2{font-size:2em;color:#a259ff;margin-bottom:1rem;text-shadow:0 0 15px rgba(162,89,255,0.7)}.username-prompt input{padding:.6rem 1.2rem;border:none;border-radius:8px;background:#1f1f1f;color:#fff;width:100%;max-width:300px;margin-bottom:1rem;font-family:'Roboto',sans-serif;transition:box-shadow .3s}.username-prompt input:focus{outline:none;box-shadow:0 0 10px rgba(162,89,255,0.5)}.username-prompt button{padding:.6rem 1.2rem;background:linear-gradient(135deg,#a259ff 0%,#c084fc 100%);border:none;border-radius:8px;color:#fff;font-weight:600;cursor:pointer;transition:background .3s,transform .3s,box-shadow .3s;margin:.5rem}.username-prompt button:hover{background:linear-gradient(135deg,#c084fc 0%,#c084fc 100%);transform:scale(1.05);box-shadow:0 2px 15px rgba(162,89,255,0.6)}.username-prompt button:disabled{background:#666;cursor:not-allowed;transform:none;box-shadow:none}.username-prompt button.clicked{border:2px solid #0f0;transition:border .2s ease}.error-message{color:#ff6666;margin-bottom:1rem;text-align:center;font-size:1rem;background:rgba(255,102,102,0.2);padding:.5rem;border-radius:4px;width:100%;max-width:300px}.ban-message{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.9);display:none;flex-direction:column;align-items:center;justify-content:center;z-index:1000;text-align:center}.ban-message h2{font-size:2.5em;color:#ff6666;margin-bottom:1rem;text-shadow:0 0 15px rgba(255,102,102,0.7)}.ban-message p{font-size:1.2em;color:#d0d0d0;max-width:600px}.main-content{width:100%;padding:50px 20px;position:relative;display:none;flex-direction:column;align-items:center;opacity:0;transition:opacity .5s ease}.main-content.visible{display:flex;opacity:1}.wave-container{position:fixed;bottom:0;left:0;width:100%;height:120px;overflow:hidden;z-index:-1}.wave{position:absolute;bottom:0;width:200%;height:100%;background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="rgba(162, 89, 255, 0.8)" fill-opacity="1" d="M0,128C48,112,96,96,144,96C192,96,240,112,288,128C336,144,384,160,432,160C480,160,528,144,576,128C624,112,672,96,720,96C768,96,816,112,864,128C912,144,960,160,1008,160C1056,160,1104,144,1152,128C1200,112,1248,96,1296,96C1344,96,1392,112,1440,128L1440,320L0,320Z"></path></svg>') repeat-x;background-size:50% 100%;animation:waveMove 15s ease-in-out infinite,waveFloat 5s ease-in-out infinite;opacity:.8;filter:drop-shadow(0 -2px 6px rgba(162,89,255,0.5))}.wave:nth-child(2){animation:waveMove 18s ease-in-out infinite reverse,waveFloat 6s ease-in-out infinite;opacity:.6;background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="rgba(120, 50, 200, 0.7)" fill-opacity="1" d="M0,160C48,144,96,128,144,128C192,128,240,144,288,160C336,176,384,192,432,192C480,192,528,176,576,160C624,144,672,128,720,128C768,128,816,144,864,160C912,176,960,192,1008,192C1056,192,1104,176,1152,160C1200,144,1248,128,1296,128C1344,128,1392,144,1440,160L1440,320L0,320Z"></path></svg>') repeat-x;filter:drop-shadow(0 -2px 5px rgba(120,50,200,0.4))}.wave:nth-child(3){animation:waveMove 12s ease-in-out infinite,waveFloat 4s ease-in-out infinite;opacity:.4;background:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="rgba(80, 30, 150, 0.6)" fill-opacity="1" d="M0,192C48,176,96,160,144,160C192,160,240,176,288,192C336,208,384,224,432,224C480,224,528,208,576,192C624,176,672,160,720,160C768,160,816,176,864,192C912,208,960,224,1008,224C1056,224,1104,208,1152,192C1200,176,1248,160,1296,160C1344,160,1392,176,1440,192L1440,320L0,320Z"></path></svg>') repeat-x;filter:drop-shadow(0 -2px 4px rgba(80,30,150,0.3))}@keyframes waveMove{0%{transform:translateX(0)}50%{transform:translateX(-25%)}100%{transform:translateX(0)}}@keyframes waveFloat{0%{transform:translateY(0)}50%{transform:translateY(-10px)}100%{transform:translateY(0)}}.stars{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;pointer-events:none}.star{position:absolute;width:6px;height:6px;background:#a259ff;border-radius:50%;box-shadow:0 0 15px rgba(162,89,255,1),0 0 25px rgba(162,89,255,0.8);animation:shoot 4s linear infinite,twinkle 1.5s ease-in-out infinite}.star::before{content:'';position:absolute;width:40px;height:2px;background:linear-gradient(90deg,transparent,rgba(162,89,255,0.9));left:-40px;top:50%;transform:translateY(-50%)}@keyframes shoot{0%{transform:translateX(0) translateY(0);opacity:1}100%{transform:translateX(-130vw) translateY(90vh);opacity:.2}}@keyframes twinkle{0%{transform:scale(1);opacity:1}50%{transform:scale(.7);opacity:.5}100%{transform:scale(1);opacity:1}}.content-wrapper{max-width:700px;padding:50px;border-radius:20px;background:rgba(26,26,26,0.2);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);border:2px solid rgba(162,89,255,0.3);box-shadow:0 8px 32px rgba(0,0,0,0.4);animation:popIn 1s ease forwards,borderGlow 5s linear infinite,pulseGlow 3s ease-in-out infinite}@keyframes popIn{0%{transform:scale(.95);opacity:0}100%{transform:scale(1);opacity:1}}@keyframes borderGlow{0%{border-color:rgba(162,89,255,0.3)}50%{border-color:rgba(255,119,255,0.5)}100%{border-color:rgba(162,89,255,0.3)}}@keyframes pulseGlow{0%{box-shadow:0 8px 32px rgba(0,0,0,0.4),0 0 15px rgba(162,89,255,0.3)}50%{box-shadow:0 8px 32px rgba(0,0,0,0.4),0 0 25px rgba(162,89,255,0.5)}100%{box-shadow:0 8px 32px rgba(0,0,0,0.4),0 0 15px rgba(162,89,255,0.3)}}h1{font-size:6em;color:#a259ff;margin:20px 0;font-weight:700;text-transform:uppercase;letter-spacing:3px;text-align:center;text-shadow:0 0 15px rgba(162,89,255,0.7)}.letter{display:inline-block;opacity:0;transform:translateY(20px);animation:letterReveal .5s ease forwards;animation-delay:calc(var(--index) * .1s)}@keyframes letterReveal{to{opacity:1;transform:translateY(0)}}p{font-size:1.3em;color:#d0d0d0;max-width:700px;text-align:center;margin:1.5rem 0;opacity:0;transform:translateY(20px);animation:fadeInUp 1.2s cubic-bezier(.68,-.55,.27,1.55) forwards;text-shadow:0 1px 3px rgba(0,0,0,0.5)}pre{font-family:'Roboto',sans-serif;font-size:1em;color:#e0e0e0;background:rgba(50,50,50,0.5);padding:15px;border-radius:8px;max-width:700px;text-align:left;margin:0 auto;opacity:0;transform:translateY(20px);animation:fadeInUp 1.2s cubic-bezier(.68,-.55,.27,1.55) forwards .2s;white-space:pre-wrap;box-shadow:0 2px 10px rgba(0,0,0,0.2)}@keyframes fadeInUp{to{opacity:1;transform:translateY(0)}}.button-container{margin:3rem 0;display:flex;flex-direction:column;gap:70px;align-items:center}a{text-decoration:none}button{padding:20px 40px;background:linear-gradient(135deg,#1f1f1f 0%,#333 100%);border:none;border-radius:10px;color:#fff;font-size:1.4em;font-weight:700;text-transform:uppercase;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden;display:flex;align-items:center;gap:12px;width:260px;justify-content:center;box-shadow:0 0 15px rgba(162,89,255,0.3);opacity:0;transform:translateX(-50px);animation:slideIn .8s ease forwards;animation-delay:calc(var(--index) * .3s)}button:nth-child(1){--index:0}button:nth-child(2){--index:1}button:nth-child(3){--index:2}button:nth-child(4){--index:3}button:nth-child(5){--index:4}@keyframes slideIn{to{opacity:1;transform:translateX(0)}}button:hover{transform:scale(1.05);box-shadow:0 0 25px rgba(162,89,255,0.6);background:linear-gradient(135deg,#333 0%,#444 100%)}button:focus{outline:none;box-shadow:0 0 0 3px rgba(162,89,255,0.5)}button::after{content:'';position:absolute;top:50%;left:50%;width:0;height:0;background:radial-gradient(circle,rgba(162,89,255,0.4),transparent);transition:width .5s ease,height .5s ease;transform:translate(-50%,-50%);border-radius:50%}button:hover::after{width:350px;height:350px}.play-icon::before{content:'▶';font-size:1em;text-shadow:0 1px 3px rgba(0,0,0,0.5)}.proxy-icon::before{content:'🔌';font-size:1em;text-shadow:0 1px 3px rgba(0,0,0,0.5)}.app-icon::before{content:'📱';font-size:1em;text-shadow:0 1px 3px rgba(0,0,0,0.5)}.readme-icon::before{content:'📜';font-size:1em;text-shadow:0 1px 3px rgba(0,0,0,0.5)}.admin-icon::before{content:'🛠️';font-size:1em;text-shadow:0 1px 3px rgba(0,0,0,0.5)}.slot-icon::before{content:'🎰';font-size:1em;text-shadow:0 1px 3px rgba(0,0,0,0.5)}.roadmap-icon::before{content:'🗺️';font-size:1em;text-shadow:0 1px 3px rgba(0,0,0,0.5)}.arrow-button{font-size:1em;padding:8px 16px;width:auto;min-width:50px;background:none;border:none;color:#a259ff;font-weight:600;cursor:pointer;transition:all .3s ease;box-shadow:none;position:relative;overflow:visible;opacity:0;transform:translateX(-50px);animation:slideIn .8s ease forwards;animation-delay:calc(var(--index) * .3s);display:inline-flex;align-items:center;justify-content:center}.arrow-button:hover{transform:scale(1.1);box-shadow:none;background:none;color:#c084fc}.arrow-button:focus{outline:none;box-shadow:none}.arrow-button::after{content:none}.arrow-button:hover::after{content:none}.arrow-button.left-emoji{transform:rotate(180deg)}.sidebar-tab{position:fixed;right:10px;top:50%;transform:translateY(-50%);z-index:1000;opacity:0;visibility:hidden;transition:opacity .5s ease,visibility .5s ease}.sidebar-tab.visible{opacity:1;visibility:visible}.sidebar-button{padding:12px 20px;background:linear-gradient(135deg,#1f1f1f 0%,#333 100%);border:none;border-radius:12px;color:#fff;font-size:1.1em;font-weight:600;text-transform:uppercase;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;gap:8px;box-shadow:0 0 15px rgba(162,89,255,0.3);opacity:0;transform:translateX(100%);animation:slideInSidebar .8s ease forwards;animation-delay:.5s}.sidebar-button:hover{transform:scale(1.05);box-shadow:0 0 25px rgba(162,89,255,0.6);background:linear-gradient(135deg,#333 0%,#444 100%)}.sidebar-button::after{content:'';position:absolute;top:50%;left:50%;width:0;height:0;background:radial-gradient(circle,rgba(162,89,255,0.4),transparent);transition:width .5s ease,height .5s ease;transform:translate(-50%,-50%);border-radius:50%}.sidebar-button:hover::after{width:200px;height:200px}.update-icon::before{content:'🔔';font-size:1em;text-shadow:0 1px 3px rgba(0,0,0,0.5)}@keyframes slideInSidebar{to{opacity:1;transform:translateX(0)}}@media (max-width:768px){h1{font-size:3.5em}p{font-size:1.1em}pre{font-size:.9em;padding:10px}button{padding:15px 30px;font-size:1.2em;width:200px}.content-wrapper{padding:30px}.main-content{padding:30px}.wave-container{height:80px}.sidebar-button{font-size:.9em;padding:10px 15px}.arrow-button{font-size:.9em;padding:6px 12px;min-width:40px}.dev-password-prompt p{font-size:1em;max-width:90%}.dev-password-prompt .update-tab{font-size:.8em;padding:.4rem .8rem}.dev-password-prompt .button-container{flex-direction:column;gap:.5rem}.button-container{gap:50px}}.global-error{position:fixed;top:20px;left:50%;transform:translateX(-50%);background:#ff6666;color:#fff;padding:10px 20px;border-radius:8px;z-index:2000;display:none;text-align:center;max-width:80%}.debug-overlay{position:fixed;bottom:20px;right:20px;width:300px;max-height:200px;background:rgba(0,0,0,0.8);border:1px solid #a259ff;border-radius:8px;padding:10px;z-index:2000;overflow-y:auto;font-size:.8em;color:#d0d0d0;font-family:'Roboto',sans-serif}.debug-overlay h3{color:#a259ff;font-size:1em;margin-bottom:5px}.debug-overlay p{margin:2px 0;font-size:.9em;color:#fff}</style></head><body><div class="dev-password-prompt" id="devPasswordPrompt"><h2>Maintenance Mode</h2><p>zri.info is currently under maintenance and accessible only to developers. The site needs to be published to enable third-party services like Firebase. Please enter the developer password to proceed.</p><input type="password" id="devPasswordInput" placeholder="Developer Password"><div class="error-message" id="devPasswordError"></div><div class="button-container"><button id="devPasswordSubmit">Submit</button><a href="upt-progress.html" class="update-tab">Check Update Progress</a></div></div><div class="loading-screen" id="loadingScreen"><p>Loading...</p></div><div class="username-prompt" id="usernamePrompt"><h2 id="promptTitle">Register or Login</h2><input type="text" id="usernameInput" placeholder="Username" maxlength="20"><input type="password" id="passwordInput" placeholder="Password"><div class="error-message" id="usernameError"></div><button id="registerButton">Register</button><button id="loginButton">Login</button></div><div class="ban-message" id="banMessage"><h2>You Are Banned</h2><p id="banMessageText"></p></div><div class="sidebar-tab" id="sidebarTab"><a href="update-log.html" id="updateLogLink"><button class="sidebar-button"><span class="update-icon"></span> Updates</button></a></div><div class="main-content" id="mainContent"><div class="stars"></div><div class="wave-container"><div class="wave"></div><div class="wave"></div><div class="wave"></div></div><div class="content-wrapper"><h1 id="title">zri.info</h1><p>A site for local games, proxies, and other cool things</p><div class="button-container" id="buttonContainer"><div class="button-set" id="buttonSet1"><a href="game.html" id="gamesLink"><button><span class="play-icon"></span> Games</button></a><a href="proxy/indexproxy.html"><button><span class="proxy-icon"></span> Proxy</button></a><a href="app.html"><button><span class="app-icon"></span> App</button></a><a href="readme.html" id="readmeLink"><button><span class="readme-icon"></span> README</button></a></div><div class="button-set" id="buttonSet2" style="display:none"><a href="admin.html"><button><span class="admin-icon"></span> Admin</button></a><a href="slot-machine.html"><button><span class="slot-icon"></span>GAMBLING</button></a><a href="road-map.html"><button><span class="roadmap-icon"></span> Roadmap</button></a></div><button class="arrow-button" id="arrowButton" style="--index:4">➡️</button></div><p>If you encounter any games that are not functioning, please report them to <a href="mailto:help@zri.info" style="color:#a259ff;text-decoration:underline">help@zri.info</a>. Kindly use the following format for your submission:</p><pre>Game: Example Game, Issue: BlockedGame: Example Game, Issue: 404 Not Found or File Typo in Games Table </pre></div></div><div class="global-error" id="globalError"></div><div class="debug-overlay" id="debugOverlay"><h3>Debug Log</h3><div id="debugLog"></div></div><script>function debugLog(e,t="info"){console.log(`[${t.toUpperCase()}] ${e}`);const s=document.getElementById("debugLog"),o=document.createElement("p");o.textContent=`[${new Date().toISOString()}] ${e}`,t==="error"&&(o.style.color="#ff6666"),s.appendChild(o),s.scrollTop=s.scrollHeight}debugLog("Script loaded.");const firebaseConfig={apiKey:"AIzaSyCl2cCHc-sQk-wmaT-RmwQ7hixIeT7sjNc",authDomain:"zri-info-40027.firebaseapp.com",projectId:"zri-info-40027",storageBucket:"zri-info-40027.firebasestorage.app",messagingSenderId:"802389654666",appId:"1:802389654666:web:e2229db3f723eddd888173",measurementId:"G-QQTJ31LX4E"};let db;try{debugLog("Attempting to initialize Firebase...");const e=firebase.initializeApp(firebaseConfig);db=firebase.firestore(),debugLog("Firebase initialized successfully.")}catch(e){debugLog(`Firebase initialization failed: ${e.message}`,"error"),showGlobalError("Failed to initialize Firebase. Please try again later."),db=null}const devPasswordPrompt=document.getElementById("devPasswordPrompt"),devPasswordInput=document.getElementById("devPasswordInput"),devPasswordError=document.getElementById("devPasswordError"),devPasswordSubmit=document.getElementById("devPasswordSubmit"),loadingScreen=document.getElementById("loadingScreen"),usernamePrompt=document.getElementById("usernamePrompt"),promptTitle=document.getElementById("promptTitle"),usernameInput=document.getElementById("usernameInput"),passwordInput=document.getElementById("passwordInput"),usernameError=document.getElementById("usernameError"),registerButton=document.getElementById("registerButton"),loginButton=document.getElementById("loginButton"),mainContent=document.getElementById("mainContent"),banMessage=document.getElementById("banMessage"),banMessageText=document.getElementById("banMessageText"),sidebarTab=document.getElementById("sidebarTab"),arrowButton=document.getElementById("arrowButton"),buttonSet1=document.getElementById("buttonSet1"),buttonSet2=document.getElementById("buttonSet2"),DEV_PASSWORD="Jimbobno2",MAX_LOGIN_ATTEMPTS=5,COOLDOWN_MINUTES=15;let currentSet=1;registerButton.addEventListener("click",()=>{debugLog("Register button clicked."),registerButton.classList.add("clicked"),registerUsername()}),loginButton.addEventListener("click",()=>{debugLog("Login button clicked."),loginButton.classList.add("clicked"),login()}),devPasswordSubmit.addEventListener("click",()=>{debugLog("Dev password submit clicked.");const e=devPasswordInput.value.trim();if(devPasswordError.textContent="",devPasswordSubmit.disabled=!0,!e)return debugLog("Dev password empty.","error"),devPasswordError.textContent="Please enter the developer password.",void(devPasswordSubmit.disabled=!1);e===DEV_PASSWORD?(debugLog("Dev password correct, proceeding."),localStorage.setItem("devPasswordVerified","true"),devPasswordPrompt.classList.add("hiding"),setTimeout(()=>{devPasswordPrompt.style.display="none",loadingScreen.style.display="flex",checkUserStatus()},300)):(debugLog("Incorrect dev password.","error"),devPasswordError.textContent="Incorrect developer password.",devPasswordSubmit.disabled=!1,devPasswordInput.value="")}),devPasswordInput.addEventListener("keypress",e=>{"Enter"===e.key&&(debugLog("Enter key pressed on dev password input."),devPasswordSubmit.click())}),arrowButton.addEventListener("click",()=>{debugLog("Arrow button clicked."),currentSet=currentSet===1?2:1,buttonSet1.style.display=currentSet===1?"flex":"none",buttonSet2.style.display=currentSet===2?"flex":"none",arrowButton.classList.toggle("left-emoji",currentSet===1),buttonSet1.style.flexDirection="column",buttonSet2.style.flexDirection="column"});function showGlobalError(e){debugLog(`Global error: ${e}`,"error");const t=document.getElementById("globalError");t.textContent=e,t.style.display="block",setTimeout(()=>{t.style.display="none"},5e3)}function toISOString(e){return e?typeof e==="string"?e:e instanceof Date?e.toISOString():e.toDate?e.toDate().toISOString():new Date(e).toISOString():new Date().toISOString()}function formatCooldownTime(e){const t=Math.floor(e/1e3),s=Math.floor(t/60),o=t%60;return`${s}:${o<10?"0":""}${o}`}function generateUserId(){return"user_"+Date.now()+"_"+Math.floor(1e4*Math.random())}let currentUserId=localStorage.getItem("currentUserId");currentUserId?debugLog(`Using existing user ID: ${currentUserId}`):(currentUserId=generateUserId(),localStorage.setItem("currentUserId",currentUserId),debugLog(`Generated new user ID: ${currentUserId}`));async function testFirestore(){if(!db)return debugLog("Database not initialized.","error"),showGlobalError("Database not initialized."),!1;try{debugLog("Testing Firestore connectivity...");const e=db.collection("test").doc("test_doc");return await e.set({test:"Firestore connectivity test",timestamp:new Date().toISOString()}),debugLog("Firestore connectivity test passed."),!0}catch(e){return debugLog(`Firestore connectivity test failed: ${e.message}`,"error"),showGlobalError("Database connectivity test failed. Please try again."),!1}}async function getUsers(){if(!db)return debugLog("Database not initialized.","error"),showGlobalError("Database not initialized."),[];try{debugLog("Fetching users from Firestore...");const e=await db.collection("users").get(),t=e.docs.map(e=>{const t=e.data();return{id:e.id,...t,lastActive:toISOString(t.lastActive)}});return debugLog(`Fetched ${t.length} users from Firestore.`),t}catch(e){return debugLog(`Failed to fetch user data: ${e.message}`,"error"),showGlobalError("Failed to fetch user data. Please try again."),[]}}async function getLoginAttempts(e){if(!db)return debugLog("Database not initialized.","error"),showGlobalError("Database not initialized."),null;try{debugLog(`Fetching login attempts for device ${e}...`);const t=await db.collection("login_attempts").doc(e).get();if(t.exists){const e=t.data();return debugLog(`Fetched login attempts for device ${e}: ${e.failedAttempts} failed attempts.`),{failedAttempts:e.failedAttempts||0,lastFailedAt:e.lastFailedAt?toISOString(e.lastFailedAt):null,cooldownUntil:e.cooldownUntil?toISOString(e.cooldownUntil):null}}return debugLog(`No login attempts found for device ${e}.`),{failedAttempts:0,lastFailedAt:null,cooldownUntil:null}}catch(e){return debugLog(`Failed to fetch login attempts: ${e.message}`,"error"),showGlobalError("Failed to fetch login attempts. Please try again."),{failedAttempts:0,lastFailedAt:null,cooldownUntil:null}}}async function updateLoginAttempts(e,t,s,o=null){if(!db)return debugLog("Database not initialized.","error"),void showGlobalError("Database not initialized.");try{debugLog(`Updating login attempts for device ${e}...`),await db.collection("login_attempts").doc(e).set({failedAttempts:t,lastFailedAt:s?new Date(s).toISOString():null,cooldownUntil:o?new Date(o).toISOString():null},{merge:!0}),debugLog(`Updated login attempts for device ${e}: ${t} failed attempts.`)}catch(e){debugLog(`Failed to update login attempts: ${e.message}`,"error"),showGlobalError("Failed to update login attempts. Please try again.")}}async function resetLoginAttempts(e){if(!db)return debugLog("Database not initialized.","error"),void showGlobalError("Database not initialized.");try{debugLog(`Resetting login attempts for device ${e}...`),await db.collection("login_attempts").doc(e).set({failedAttempts:0,lastFailedAt:null,cooldownUntil:null},{merge:!0}),debugLog(`Reset login attempts for device ${e}.`)}catch(e){debugLog(`Failed to reset login attempts: ${e.message}`,"error"),showGlobalError("Failed to reset login attempts. Please try again.")}}async function initializePointsHistory(e,t){if(!db)return debugLog("Database not initialized.","error"),showGlobalError("Database not initialized."),!1;try{debugLog(`Initializing pointsHistory for user ${e} with ${t} points...`);const s={points:t,timestamp:new Date().toISOString()};return await db.collection("users").doc(e).collection("pointsHistory").add(s),debugLog(`Initialized pointsHistory for user ${e}.`),!0}catch(e){return debugLog(`Failed to initialize pointsHistory: ${e.message}`,"error"),!1}}async function hashPassword(e,t){try{debugLog("Hashing password with SHA-256...");const s=new TextEncoder().encode(e+t),o=await crypto.subtle.digest("SHA-256",s),n=Array.from(new Uint8Array(o)).map(e=>e.toString(16).padStart(2,"0")).join("");return debugLog("Password hashed successfully."),n}catch(e){throw debugLog(`Password hashing failed: ${e.message}`,"error"),e}}function generateSalt(){const e=new Uint8Array(16);return crypto.getRandomValues(e),Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("")}async function registerUsername(){debugLog("Starting registerUsername function."),db?(registerButton.disabled=!0,loginButton.disabled=!0,registerButton.textContent="Registering...",usernameError.textContent=""):(debugLog("Database not initialized. Cannot register.","error"),showGlobalError("Database not initialized. Cannot register."),registerButton.disabled=!1,loginButton.disabled=!1,registerButton.textContent="Register");const e=usernameInput.value.trim(),t=passwordInput.value;debugLog(`Register attempt - Username: ${e}, Password length: ${t.length}`),e&&t?e.length<3||e.length>20?(debugLog("Validation failed: Username length invalid.","error"),usernameError.textContent="Username must be between 3 and 20 characters.",registerButton.disabled=!1,loginButton.disabled=!1,registerButton.textContent="Register"):/^[a-zA-Z0-9_]+$/.test(e)?t.length<6?(debugLog("Validation failed: Password too short.","error"),usernameError.textContent="Password must be at least 6 characters.",registerButton.disabled=!1,loginButton.disabled=!1,registerButton.textContent="Register"):(async()=>{let s;try{s=await getUsers()}catch(e){return debugLog(`Error checking username availability: ${e.message}`,"error"),usernameError.textContent="Error checking username availability. Please try again.",registerButton.disabled=!1,loginButton.disabled=!1,void(registerButton.textContent="Register")}const o=s.some(t=>t.username.toLowerCase()===e.toLowerCase());if(o)return debugLog("Username already taken.","error"),usernameError.textContent="Username is already taken.",registerButton.disabled=!1,loginButton.disabled=!1,void(registerButton.textContent="Register");const n=generateSalt();let a;try{a=await hashPassword(t,n)}catch(e){return debugLog(`Password hashing failed: ${e.message}`,"error"),usernameError.textContent="Error hashing password. Please try again.",registerButton.disabled=!1,loginButton.disabled=!1,void(registerButton.textContent="Register")}const i=100,l={uid:currentUserId,username:e,password:a,salt:n,banned:!1,banMessage:"",lastActive:new Date().toISOString(),points:i,items:["theme_classic"]};try{debugLog(`Creating user document for UID: ${currentUserId}...`),await db.collection("users").doc(currentUserId).set(l),debugLog("User document created successfully.");const e=await initializePointsHistory(currentUserId,i);e||debugLog("Failed to initialize pointsHistory, but continuing with registration.","error"),await resetLoginAttempts(currentUserId),debugLog("User registered successfully."),usernamePrompt.classList.add("hiding"),setTimeout(()=>{usernamePrompt.style.display="none",mainContent.style.display="flex",mainContent.classList.add("visible"),setTimeout(()=>{sidebarTab.classList.add("visible")},500),startAnimations(),updateUserActivity(currentUserId),registerButton.disabled=!1,loginButton.disabled=!1,registerButton.textContent="Register"},300)}catch(e){debugLog(`Error registering user: ${e.message}`,"error"),usernameError.textContent="Registration failed. Please try again.",showGlobalError("Failed to register user. Please try again."),registerButton.disabled=!1,loginButton.disabled=!1,registerButton.textContent="Register"}})():(debugLog("Validation failed: Username contains invalid characters.","error"),usernameError.textContent="Username can only contain letters, numbers, and underscores.",registerButton.disabled=!1,loginButton.disabled=!1,registerButton.textContent="Register"):(debugLog("Validation failed: Username or password empty.","error"),usernameError.textContent="Please enter both username and password.",registerButton.disabled=!1,loginButton.disabled=!1,registerButton.textContent="Register"),debugLog("registerUsername function completed.")}async function login(){debugLog("Starting login function."),db?(registerButton.disabled=!0,loginButton.disabled=!0,loginButton.textContent="Logging in...",usernameError.textContent=""):(debugLog("Database not initialized. Cannot login.","error"),showGlobalError("Database not initialized. Cannot login."),registerButton.disabled=!1,loginButton.disabled=!1,loginButton.textContent="Login");const e=usernameInput.value.trim(),t=passwordInput.value;if(debugLog(`Login attempt - Username: ${e}, Password length: ${t.length}`),e&&t){debugLog(`Checking login attempts for device ${currentUserId}...`);let s=await getLoginAttempts(currentUserId);s||(debugLog("Failed to fetch login attempts, initializing default.","error"),s={failedAttempts:0,lastFailedAt:null,cooldownUntil:null});const o=new Date;let n=s.cooldownUntil?new Date(s.cooldownUntil):null;if(n&&o<n){const e=n-o,t=formatCooldownTime(e);return debugLog(`Cooldown active: Try again in ${t}.`,"error"),usernameError.textContent=`Too many failed login attempts. Try again in ${t}.`,registerButton.disabled=!1,loginButton.disabled=!1,void(loginButton.textContent="Login")}if(n&&o>=n&&(debugLog("Cooldown period has expired, resetting login attempts."),await resetLoginAttempts(currentUserId),s={failedAttempts:0,lastFailedAt:null,cooldownUntil:null}),debugLog(`Current failed attempts: ${s.failedAttempts}`),!(await getUsers()).find(t=>t.username.toLowerCase()===e.toLowerCase())){s.failedAttempts+=1,s.lastFailedAt=o.toISOString();const e=MAX_LOGIN_ATTEMPTS-s.failedAttempts;return s.failedAttempts>=MAX_LOGIN_ATTEMPTS?(s.cooldownUntil=new Date(o.getTime()+6e4*COOLDOWN_MINUTES).toISOString(),t=formatCooldownTime(6e4*COOLDOWN_MINUTES),debugLog("Max login attempts reached. Cooldown initiated.","error"),usernameError.textContent=`Too many failed login attempts. Try again in ${t}.`):(debugLog(`Username not found. ${e} attempts remaining.`,"error"),usernameError.textContent=`Username not found. ${e} attempt${1!==e?"s":""} remaining.`),await updateLoginAttempts(currentUserId,s.failedAttempts,s.lastFailedAt,s.cooldownUntil),registerButton.disabled=!1,loginButton.disabled=!1,void(loginButton.textContent="Login")}let a,i;try{a=await getUsers(),i=a.find(t=>t.username.toLowerCase()===e.toLowerCase())}catch(e){return debugLog(`Error fetching users: ${e.message}`,"error"),usernameError.textContent="Error fetching user data. Please try again.",registerButton.disabled=!1,loginButton.disabled=!1,void(loginButton.textContent="Login")}let l;try{const e=await hashPassword(t,i.salt||""),s=i.password===e;debugLog("Password verification completed."),l=s}catch(e){return debugLog(`Password verification failed: ${e.message}`,"error"),usernameError.textContent="Error verifying password. Please try again.",registerButton.disabled=!1,loginButton.disabled=!1,void(loginButton.textContent="Login")}if(l){debugLog("Login successful, resetting login attempts."),await resetLoginAttempts(currentUserId),currentUserId=i.uid,localStorage.setItem("currentUserId",currentUserId),debugLog("Login successful, reset login attempts."),i.banned?(debugLog("User is banned.","error"),usernamePrompt.style.display="none",banMessage.style.display="flex",banMessageText.textContent=i.banMessage||"You have been banned from zri.info.",registerButton.disabled=!1,loginButton.disabled=!1,loginButton.textContent="Login"):(debugLog("Transitioning to main content after successful login."),usernamePrompt.classList.add("hiding"),setTimeout(()=>{usernamePrompt.style.display="none",mainContent.style.display="flex",mainContent.classList.add("visible"),setTimeout(()=>{sidebarTab.classList.add("visible")},500),startAnimations(),updateUserActivity(currentUserId),registerButton.disabled=!1,loginButton.disabled=!1,loginButton.textContent="Login"},300))}else{s.failedAttempts+=1,s.lastFailedAt=o.toISOString();const e=MAX_LOGIN_ATTEMPTS-s.failedAttempts;s.failedAttempts>=MAX_LOGIN_ATTEMPTS?(s.cooldownUntil=new Date(o.getTime()+6e4*COOLDOWN_MINUTES).toISOString(),t=formatCooldownTime(6e4*COOLDOWN_MINUTES),debugLog("Max login attempts reached. Cooldown initiated.","error"),usernameError.textContent=`Too many failed login attempts. Try again in ${t}.`):(debugLog(`Incorrect password. ${e} attempts remaining.`,"error"),usernameError.textContent=`Incorrect password. ${e} attempt${1!==e?"s":""} remaining.`),await updateLoginAttempts(currentUserId,s.failedAttempts,s.lastFailedAt,s.cooldownUntil),registerButton.disabled=!1,loginButton.disabled=!1,loginButton.textContent="Login"}}else debugLog("Validation failed: Username or password empty.","error"),usernameError.textContent="Please enter both username and password.",registerButton.disabled=!1,loginButton.disabled=!1,loginButton.textContent="Login";debugLog("login function completed.")}async function updateUserActivity(e){if(!db)return void debugLog("Database not initialized.","error");try{debugLog(`Updating user activity for UID: ${e}...`),await db.collection("users").doc(e).update({lastActive:new Date().toISOString()}),debugLog(`Updated user activity for UID: ${e}`)}catch(e){debugLog(`Failed to update user activity: ${e.message}`,"error")}}async function checkUserStatus(){debugLog("Starting checkUserStatus function.");try{if(!db)return debugLog("Database not initialized. Showing login prompt.","error"),void showGlobalError("Database not initialized. Please register or login.");debugLog("Running Firestore connectivity test...");const e=await testFirestore();if(!e)return void debugLog("Firestore test failed, proceeding to login prompt.","error");debugLog("Fetching user data...");const t=await getUsers(),s=t.find(e=>e.uid===currentUserId);s&&s.username?s.banned?(debugLog("User is banned, showing ban message.","error"),banMessage.style.display="flex",banMessageText.textContent=s.banMessage||"You have been banned from zri.info."):(debugLog("User found and not banned, showing main content."),mainContent.style.display="flex",mainContent.classList.add("visible"),setTimeout(()=>{sidebarTab.classList.add("visible")},500),startAnimations(),updateUserActivity(currentUserId)):(debugLog("No user found, showing login prompt."),usernamePrompt.style.display="flex",usernamePrompt.style.opacity="1")}catch(e){debugLog(`Failed to load user data: ${e.message}`,"error"),showGlobalError("Failed to load user data. Please register or login.")}finally{debugLog("Hiding loading screen."),loadingScreen.classList.add("hiding"),setTimeout(()=>{loadingScreen.style.display="none",mainContent.style.display!=="flex"&&banMessage.style.display!=="flex"&&usernamePrompt.style.display!=="flex"&&(debugLog("No content shown after loading, showing login prompt as fallback."),usernamePrompt.style.display="flex",usernamePrompt.style.opacity="1")},300),debugLog("checkUserStatus function completed.")}}document.addEventListener("DOMContentLoaded",()=>{debugLog("DOM fully loaded."),"true"===localStorage.getItem("devPasswordVerified")?(debugLog("Developer password previously verified, bypassing prompt."),devPasswordPrompt.style.display="none",loadingScreen.style.display="flex",usernamePrompt.style.display="none",mainContent.style.display="none",banMessage.style.display="none",checkUserStatus()):(debugLog("Developer password not verified, showing prompt."),devPasswordPrompt.style.display="flex",loadingScreen.style.display="none",usernamePrompt.style.display="none",mainContent.style.display="none",banMessage.style.display="none")}),setInterval(async()=>{if(!db)return;try{const e=await getUsers(),t=e.find(e=>e.uid===currentUserId);t&&!t.banned&&mainContent.classList.contains("visible")&&updateUserActivity(currentUserId)}catch(e){debugLog(`Activity update failed: ${e.message}`,"error")}},3e4);const title=document.getElementById("title"),text=title.textContent;title.innerHTML="",text.split("").forEach((e,s)=>{const o=document.createElement("span");o.className="letter",o.textContent=e,o.style.setProperty("--index",s),title.appendChild(o)});const starsContainer=document.querySelector(".stars");function createStar(){const e=document.createElement("div");e.className="star";const t=100*Math.random();e.style.left=`${t}%`,e.style.top=`${100*Math.random()}%`,starsContainer.appendChild(e),setTimeout(()=>e.remove(),4e3)}let particleInterval=null;function startParticles(){particleInterval&&clearInterval(particleInterval),particleInterval=setInterval(createStar,80),debugLog("Started particle animations.")}function stopParticles(){particleInterval&&clearInterval(particleInterval),debugLog("Stopped particle animations.")}function startAnimations(){startParticles()}document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"?startParticles():stopParticles()}),window.addEventListener("resize",()=>{document.visibilityState==="visible"&&startParticles()}),document.getElementById("gamesLink")?.addEventListener("click",function(e){debugLog("Games link clicked."),e.preventDefault(),mainContent.style.opacity="0",mainContent.style.transition="opacity 0.3s ease",setTimeout(()=>{window.location.href=this.href},300)}),document.getElementById("readmeLink")?.addEventListener("click",function(e){debugLog("README link clicked."),e.preventDefault(),mainContent.style.opacity="0",mainContent.style.transition="opacity 0.3s ease",setTimeout(()=>{window.location.href=this.href},300)}),document.getElementById("updateLogLink")?.addEventListener("click",function(e){debugLog("Update log link clicked."),e.preventDefault(),mainContent.style.opacity="0",mainContent.style.transition="opacity 0.3s ease",setTimeout(()=>{window.location.href=this.href},300)}),usernameInput.addEventListener("keypress",e=>{"Enter"===e.key&&(debugLog("Enter key pressed on username input."),login())}),passwordInput.addEventListener("keypress",e=>{"Enter"===e.key&&(debugLog("Enter key pressed on password input."),login())})</script><script src="banCheck.js"></script><script>(function(){const e=window.location.href;setTimeout(()=>{window.location.href===e&&typeof firebase!=="undefined"&&(console.log("Cloudflare script may have interfered. Re-running ban check."),typeof enforceBanCheck==="function"&&enforceBanCheck())},2e3)})()</script></body></html>