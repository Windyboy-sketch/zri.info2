<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Games - zri.info</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    body {
      margin: 0;
      padding: 0;
      background: linear-gradient(45deg, #0a0a0a, #1a1a1a, #0a0a0a);
      background-size: 200% 200%;
      animation: gradientShift 15s ease infinite;
      color: #ccc;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 2rem;
      position: relative;
      overflow-x: hidden;
    }

    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .stars {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
    }

    .star {
      position: absolute;
      width: 3px;
      height: 3px;
      background: #a259ff;
      border-radius: 50%;
      box-shadow: 0 0 8px rgba(162, 89, 255, 0.8), 0 0 12px rgba(162, 89, 255, 0.5);
    }

    .star::before {
      content: '';
      position: absolute;
      width: 20px;
      height: 2px;
      background: linear-gradient(90deg, transparent, rgba(162, 89, 255, 0.5));
      left: -20px;
      top: 50%;
      transform: translateY(-50%);
    }

    h1 {
      font-size: 3rem;
      color: #a259ff;
      margin-bottom: 1rem;
    }

    .description {
      font-size: 1rem;
      color: #888;
      margin-bottom: 2rem;
      text-align: center;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-bottom: 2rem;
      justify-content: center;
      align-items: center;
    }

    .search-bar {
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 8px;
      background-color: #222;
      color: #fff;
      width: 200px;
    }

    .filter-bar select,
    .sort-bar select {
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 8px;
      background-color: #222;
      color: #fff;
    }

    .filter-bar label {
      margin-right: 0.5rem;
      color: #ccc;
    }

    .game-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1.5rem;
      width: 100%;
      max-width: 1200px;
    }

    .game-card {
      background-color: #1a1a1a;
      padding: 1rem;
      border-radius: 12px;
      box-shadow: 0 0 15px #a259ff33;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      position: relative;
      overflow: hidden;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeInCard 0.5s ease forwards;
      animation-delay: calc(var(--index) * 0.1s);
    }

    @keyframes fadeInCard {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .game-card:hover {
      transform: translateY(-5px) rotate(2deg);
      box-shadow: 0 0 25px #a259ff66;
    }

    .game-card h2 {
      font-size: 1.2rem;
      margin: 0 0 0.5rem 0;
      color: #fff;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .game-card p {
      margin: 0.3rem 0;
      font-size: 0.8rem;
    }

    .play-button {
      display: block;
      padding: 0.4rem 0.8rem;
      background-color: #a259ff;
      color: #fff;
      text-decoration: none;
      border-radius: 8px;
      margin-top: 0.8rem;
      transition: background 0.3s;
      text-align: center;
      font-size: 0.9rem;
    }

    .play-button:hover {
      background-color: #c084fc;
    }

    .favorite-button {
      position: absolute;
      top: 10px;
      right: 10px;
      background: none;
      border: none;
      color: #ccc;
      font-size: 1.2rem;
      cursor: pointer;
      transition: color 0.3s;
    }

    .favorite-button.favorited {
      color: #a259ff;
    }

    .pagination {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
      align-items: center;
    }

    .pagination button {
      background-color: #222;
      color: #fff;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .pagination button:hover:not(:disabled) {
      background-color: #444;
    }

    .pagination button:disabled {
      background-color: #555;
      cursor: not-allowed;
    }

    .pagination span {
      color: #ccc;
    }

    footer {
      margin-top: 3rem;
      font-size: 0.9rem;
      color: #555;
    }

    .back-link {
      margin-bottom: 2rem;
      align-self: flex-start;
      color: #a259ff;
      text-decoration: none;
    }

    .back-link:hover {
      text-decoration: underline;
    }

    .error-message {
      color: #ff5555;
      text-align: center;
    }

    .back-to-top {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #a259ff;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      cursor: pointer;
      opacity: 0;
      transition: opacity 0.3s;
      z-index: 1000;
    }

    .back-to-top.visible {
      opacity: 1;
    }

    .back-to-top:hover {
      background-color: #c084fc;
    }

    @media (max-width: 768px) {
      h1 { font-size: 2rem; }
      .description { font-size: 0.9rem; }
      .controls { flex-direction: column; }
      .search-bar, .filter-bar select, .sort-bar select { width: 100%; }
      .game-grid { 
        grid-template-columns: repeat(2, 1fr);
      }
      .game-card h2 { font-size: 1rem; }
      .game-card p { font-size: 0.7rem; }
      .play-button { font-size: 0.8rem; padding: 0.3rem 0.6rem; }
      .favorite-button { font-size: 1rem; }
      .back-to-top {
        width: 40px;
        height: 40px;
        font-size: 1.2rem;
      }
    }
  </style>
</head>
<body>
  <div class="stars"></div>
  <a class="back-link" href="index.html">← Back to Home</a>

  <h1>Games</h1>
  <p class="description">Browse local games available through zri.info</p>

  <div class="controls">
    <input type="text" class="search-bar" id="searchBar" placeholder="Search games..." oninput="applyFilters()">
    <div class="filter-bar">
      <label for="platform">Platform:</label>
      <select id="platform" onchange="applyFilters()">
        <option value="all">All</option>
        <option value="windows">Windows</option>
        <option value="linux">Linux</option>
      </select>
    </div>
    <div class="filter-bar">
      <label for="genre">Genre:</label>
      <select id="genre" onchange="applyFilters()">
        <option value="all">All</option>
        <option value="horror">Horror</option>
        <option value="rpg">RPG</option>
        <option value="puzzle">Puzzle</option>
        <option value="action">Action</option>
      </select>
    </div>
    <div class="filter-bar">
      <label for="favorites">Favorites:</label>
      <select id="favorites" onchange="applyFilters()">
        <option value="all">All Games</option>
        <option value="favorites">Favorites Only</option>
      </select>
    </div>
    <div class="sort-bar">
      <label for="sort">Sort by:</label>
      <select id="sort" onchange="applyFilters()">
        <option value="title-asc">Title (A-Z)</option>
        <option value="title-desc">Title (Z-A)</option>
        <option value="platform-asc">Platform (A-Z)</option>
        <option value="platform-desc">Platform (Z-A)</option>
        <option value="genre-asc">Genre (A-Z)</option>
        <option value="genre-desc">Genre (Z-A)</option>
      </select>
    </div>
  </div>

  <div class="game-grid" id="gameGrid"></div>

  <div class="pagination">
    <button onclick="prevPage()" id="prevBtn">Prev</button>
    <span id="pageInfo"></span>
    <button onclick="nextPage()" id="nextBtn">Next</button>
  </div>

  <button class="back-to-top" id="backToTop" onclick="scrollToTop()">↑</button>

  <footer>
    © 2025 zri.info. All rights reserved.
  </footer>

  <script>
    // Game data
    const games = [
      { title: "2048", platform: "Windows", genre: "Puzzle", path: "games/2048/index.html" },
      { title: "adarkroom", platform: "Windows", genre: "Horror", path: "games/adarkroom/index.html" },
      { title: "asciispace", platform: "Linux", genre: "Action", path: "games/asciispace/index.html" },
      { title: "assessmentexamination", platform: "Windows", genre: "Puzzle", path: "games/assessmentexamination/index.html" },
      { title: "asteroids", platform: "Linux", genre: "Action", path: "games/asteroids/index.html" },
      { title: "astray", platform: "Windows", genre: "Horror", path: "games/astray/index.html" },
      { title: "backcountry", platform: "Linux", genre: "RPG", path: "games/backcountry/index.html" },
      { title: "baldisbasics", platform: "Windows", genre: "Horror", path: "games/baldisbasics/index.html" },
      { title: "basketballlegends", platform: "Windows", genre: "Action", path: "games/basketballlegends/index.html" },
      { title: "basketballstars", platform: "Windows", genre: "Action", path: "games/basketballstars/index.html" },
      { title: "basketbrosio", platform: "Linux", genre: "Action", path: "games/basketbrosio/index.html" },
      { title: "basketrandom", platform: "Windows", genre: "Action", path: "games/basketrandom/index.html" },
      { title: "bitlife", platform: "Linux", genre: "RPG", path: "games/bitlife/index.html" },
      { title: "blackholesquare", platform: "Windows", genre: "Puzzle", path: "games/blackholesquare/index.html" },
      { title: "bounceback", platform: "Linux", genre: "Action", path: "games/bounceback/index.html" },
      { title: "boxingrandom", platform: "Windows", genre: "Action", path: "games/boxingrandom/index.html" },
      { title: "breakout", platform: "Linux", genre: "Action", path: "games/breakout/index.html" },
      { title: "btd4", platform: "Windows", genre: "Action", path: "games/btd4/index.html" },
      { title: "captaincallisto", platform: "Linux", genre: "Action", path: "games/captaincallisto/index.html" },
      { title: "chess", platform: "Windows", genre: "Puzzle", path: "games/chess/index.html" },
      { title: "chromanichord", platform: "Linux", genre: "Puzzle", path: "games/chromanichord/index.html" },
      { title: "chromedino", platform: "Windows", genre: "Action", path: "games/chromedino/index.html" },
      { title: "clickerheroes", platform: "Linux", genre: "RPG", path: "games/clickerheroes/index.html" },
      { title: "clusterush", platform: "Windows", genre: "Action", path: "games/clusterush/index.html" },
      { title: "connect3", platform: "Linux", genre: "Puzzle", path: "games/connect3/index.html" },
      { title: "cookieclicker", platform: "Windows", genre: "Action", path: "games/cookieclicker/index.html" },
      { title: "crossyroad", platform: "Linux", genre: "Action", path: "games/crossyroad/index.html" },
      { title: "csgoclicker", platform: "Windows", genre: "Action", path: "games/csgoclicker/index.html" },
      { title: "cubefield", platform: "Linux", genre: "Action", path: "games/cubefield/index.html" },
      { title: "cubitomayhem", platform: "Windows", genre: "Action", path: "games/cubitomayhem/index.html" },
      { title: "cuttherope", platform: "Linux", genre: "Puzzle", path: "games/cuttherope/index.html" },
      { title: "cuttheropeholiday", platform: "Windows", genre: "Puzzle", path: "games/cuttheropeholiday/index.html" },
      { title: "cuttheropetimetravel", platform: "Linux", genre: "Puzzle", path: "games/cuttheropetimetravel/index.html" },
      { title: "deathrun3d", platform: "Windows", genre: "Action", path: "games/deathrun3d/index.html" },
      { title: "deepestsword", platform: "Linux", genre: "Action", path: "games/deepestsword/index.html" },
      { title: "doodlejump", platform: "Windows", genre: "Action", path: "games/doodlejump/index.html" },
      { title: "doom", platform: "Linux", genre: "Action", path: "games/doom/index.html" },
      { title: "drawthehill", platform: "Windows", genre: "Puzzle", path: "games/drawthehill/index.html" },
      { title: "drift", platform: "Linux", genre: "Action", path: "games/drift/index.html" },
      { title: "drifthunters", platform: "Windows", genre: "Action", path: "games/drifthunters/index.html" },
      { title: "drivemad", platform: "Linux", genre: "Action", path: "games/drivemad/index.html" },
      { title: "ducklife", platform: "Windows", genre: "RPG", path: "games/ducklife/index.html" },
      { title: "ducklife2", platform: "Linux", genre: "RPG", path: "games/ducklife2/index.html" },
      { title: "ducklife3", platform: "Windows", genre: "RPG", path: "games/ducklife3/index.html" },
      { title: "ducklife4", platform: "Linux", genre: "RPG", path: "games/ducklife4/index.html" },
      { title: "ducklife5", platform: "Windows", genre: "RPG", path: "games/ducklife5/index.html" },
      { title: "earntodie", platform: "Linux", genre: "Action", path: "games/earntodie/index.html" },
      { title: "edgenotfound", platform: "Windows", genre: "Puzzle", path: "games/edgenotfound/index.html" },
      { title: "eggycar", platform: "Linux", genre: "Action", path: "games/eggycar/index.html" },
      { title: "evilglitch", platform: "Windows", genre: "Horror", path: "games/evilglitch/index.html" },
      { title: "factoryballsforever", platform: "Linux", genre: "Puzzle", path: "games/factoryballsforever/index.html" },
      { title: "fireboyandwatergirlforesttemple", platform: "Windows", genre: "Puzzle", path: "games/fireboyandwatergirlforesttemple/index.html" },
      { title: "flappy2048", platform: "Linux", genre: "Puzzle", path: "games/flappy2048/index.html" },
      { title: "flappybird", platform: "Windows", genre: "Action", path: "games/flappybird/index.html" },
      { title: "flappyplane", platform: "Linux", genre: "Action", path: "games/flappyplane/index.html" },
      { title: "flightsimulator", platform: "Windows", genre: "Action", path: "games/flightsimulator/index.html" },
      { title: "fridaynightfunkin", platform: "Linux", genre: "Action", path: "games/fridaynightfunkin/index.html" },
      { title: "friendlyfire", platform: "Windows", genre: "Action", path: "games/friendlyfire/index.html" },
      { title: "fruitninja", platform: "Linux", genre: "Action", path: "games/fruitninja/index.html" },
      { title: "geometrydash", platform: "Windows", genre: "Action", path: "games/geometrydash/index.html" },
      { title: "getawayshootoutnew", platform: "Linux", genre: "Action", path: "games/getawayshootoutnew/index.html" },
      { title: "gladihoppers", platform: "Windows", genre: "Action", path: "games/gladihoppers/index.html" },
      { title: "googlesnake", platform: "Linux", genre: "Puzzle", path: "games/googlesnake/index.html" },
      { title: "gopherkart", platform: "Windows", genre: "Action", path: "games/gopherkart/index.html" },
      { title: "grindcraft", platform: "Linux", genre: "RPG", path: "games/grindcraft/index.html" },
      { title: "hexql", platform: "Windows", genre: "Action", path: "games/hexql/index.html" },
      { title: "hextris", platform: "Linux", genre: "Puzzle", path: "games/hextris/index.html" },
      { title: "highwaytraffic", platform: "Windows", genre: "Action", path: "games/highwaytraffic/index.html" },
      { title: "konnekt", platform: "Linux", genre: "Puzzle", path: "games/konnekt/index.html" },
      { title: "learntofly", platform: "Windows", genre: "Action", path: "games/learntofly/index.html" },
      { title: "letssurf", platform: "Linux", genre: "Action", path: "games/letssurf/index.html" },
      { title: "littlealchemy", platform: "Windows", genre: "Puzzle", path: "games/littlealchemy/index.html" },
      { title: "mergeroundracers", platform: "Linux", genre: "Action", path: "games/mergeroundracers/index.html" },
      { title: "monkeymart", platform: "Windows", genre: "RPG", path: "games/monkeymart/index.html" },
      { title: "motoroadrash3d", platform: "Linux", genre: "Action", path: "games/motoroadrash3d/index.html" },
      { title: "motox3m", platform: "Windows", genre: "Action", path: "games/motox3m/index.html" },
      { title: "ninjavsevilcorp", platform: "Linux", genre: "Action", path: "games/ninjavsevilcorp/index.html" },
      { title: "omnombo", platform: "Windows", genre: "Action", path: "games/omnombo/index.html" },
      { title: "ovo", platform: "Linux", genre: "Action", path: "games/ovo/index.html" },
      { title: "ovo2", platform: "Windows", genre: "Action", path: "games/ovo2/index.html" },
      { title: "packabunchas", platform: "Linux", genre: "Puzzle", path: "games/packabunchas/index.html" },
      { title: "pacman", platform: "Windows", genre: "Action", path: "games/pacman/index.html" },
      { title: "paperio", platform: "Linux", genre: "Action", path: "games/paperio/index.html" },
      { title: "particleclicker", platform: "Windows", genre: "Action", path: "games/particleclicker/index.html" },
      { title: "pushback", platform: "Linux", genre: "Action", path: "games/pushback/index.html" },
      { title: "q1k3", platform: "Windows", genre: "Action", path: "games/q1k3/index.html" },
      { title: "racer", platform: "Linux", genre: "Action", path: "games/racer/index.html" },
      { title: "radiusraid", platform: "Windows", genre: "Action", path: "games/radiusraid/index.html" },
      { title: "redball4", platform: "Linux", genre: "Action", path: "games/redball4/index.html" },
      { title: "retrobowl", platform: "Windows", genre: "Action", path: "games/retrobowl/index.html" },
      { title: "retrohaunt", platform: "Linux", genre: "Horror", path: "games/retrohaunt/index.html" },
      { title: "riddleschool2", platform: "Windows", genre: "Puzzle", path: "games/riddleschool2/index.html" },
      { title: "ritz", platform: "Linux", genre: "Puzzle", path: "games/ritz/index.html" },
      { title: "roadblocks", platform: "Windows", genre: "Action", path: "games/roadblocks/index.html" },
      { title: "run3", platform: "Linux", genre: "Action", path: "games/run3/index.html" },
      { title: "scrapmetal3", platform: "Windows", genre: "Action", path: "games/scrapmetal3/index.html" },
      { title: "shuttledeck", platform: "Linux", genre: "Puzzle", path: "games/shuttledeck/index.html" },
      { title: "sketchbook04", platform: "Windows", genre: "Puzzle", path: "games/sketchbook04/index.html" },
      { title: "sleepingbeauty", platform: "Linux", genre: "RPG", path: "games/sleepingbeauty/index.html" },
      { title: "slitherio", platform: "Windows", genre: "Action", path: "games/slitherio/index.html" },
      { title: "slope", platform: "Linux", genre: "Action", path: "games/slope/index.html" },
      { title: "slope2", platform: "Windows", genre: "Action", path: "games/slope2/index.html" },
      { title: "snake", platform: "Linux", genre: "Puzzle", path: "games/snake/index.html" },
      { title: "snowbattle", platform: "Windows", genre: "Action", path: "games/snowbattle/index.html" },
      { title: "soccerrandom", platform: "Linux", genre: "Action", path: "games/soccerrandom/index.html" },
      { title: "solitaire", platform: "Windows", genre: "Puzzle", path: "games/solitaire/index.html" },
      { title: "spacecompany", platform: "Linux", genre: "RPG", path: "games/spacecompany/index.html" },
      { title: "spacegarden", platform: "Windows", genre: "RPG", path: "games/spacegarden/index.html" },
      { title: "spacehuggers", platform: "Linux", genre: "Action", path: "games/spacehuggers/index.html" },
      { title: "spaceinvaders", platform: "Windows", genre: "Action", path: "games/spaceinvaders/index.html" },
      { title: "stack", platform: "Linux", genre: "Puzzle", path: "games/stack/index.html" },
      { title: "stackball", platform: "Windows", genre: "Action", path: "games/stackball/index.html" },
      { title: "stickmanboost", platform: "Linux", genre: "Action", path: "games/stickmanboost/index.html" },
      { title: "stickmanclimb", platform: "Windows", genre: "Action", path: "games/stickmanclimb/index.html" },
      { title: "stickmangolf", platform: "Linux", genre: "Action", path: "games/stickmangolf/index.html" },
      { title: "stickmanhook", platform: "Windows", genre: "Action", path: "games/stickmanhook/index.html" },
      { title: "stickmansurvival", platform: "Linux", genre: "Action", path: "games/stickmansurvival/index.html" },
      { title: "subwaysurfers", platform: "Windows", genre: "Action", path: "games/subwaysurfers/index.html" },
      { title: "subwaysurfersny", platform: "Linux", genre: "Action", path: "games/subwaysurfersny/index.html" },
      { title: "subwaysurferssingapore", platform: "Windows", genre: "Action", path: "games/subwaysurferssingapore/index.html" },
      { title: "tanukisunset", platform: "Linux", genre: "Action", path: "games/tanukisunset/index.html" },
      { title: "tetris", platform: "Windows", genre: "Puzzle", path: "games/tetris/index.html" },
      { title: "themazeofspacegoblins", platform: "Linux", genre: "Action", path: "games/themazeofspacegoblins/index.html" },
      { title: "timeshooter", platform: "Windows", genre: "Action", path: "games/timeshooter/index.html" },
      { title: "timeshooter2", platform: "Linux", genre: "Action", path: "games/timeshooter2/index.html" },
      { title: "timeshooter3", platform: "Windows", genre: "Action", path: "games/timeshooter3/index.html" },
      { title: "tinyfishing", platform: "Linux", genre: "RPG", path: "games/tinyfishing/index.html" },
      { title: "tombofthmask", platform: "Windows", genre: "Action", path: "games/tombofthmask/index.html" },
      { title: "topspeedracing3d", platform: "Linux", genre: "Action", path: "games/topspeedracing3d/index.html" },
      { title: "towermaster", platform: "Windows", genre: "Puzzle", path: "games/towermaster/index.html" },
      { title: "trimps", platform: "Linux", genre: "RPG", path: "games/trimps/index.html" },
      { title: "tunnelrush", platform: "Windows", genre: "Action", path: "games/tunnelrush/index.html" },
      { title: "vex4", platform: "Linux", genre: "Action", path: "games/vex4/index.html" },
      { title: "vex5", platform: "Windows", genre: "Action", path: "games/vex5/index.html" },
      { title: "vex6", platform: "Linux", genre: "Action", path: "games/vex6/index.html" },
      { title: "webecomewhatwebehold", platform: "Windows", genre: "Puzzle", path: "games/webecomewhatwebehold/index.html" },
      { title: "worldshardestgame2", platform: "Linux", genre: "Puzzle", path: "games/worldshardestgame2/index.html" },
      { title: "xx142b2exe", platform: "Windows", genre: "Action", path: "games/xx142b2exe/index.html" },
      { title: "zombsroyale", platform: "Linux", genre: "Action", path: "games/zombsroyale/index.html" }
    ];

    let currentPage = 1;
    const gamesPerPage = 16;
    let filteredGames = [...games];

    // Load favorites from localStorage with error handling
    let favorites = [];
    try {
      const storedFavorites = localStorage.getItem('favorites');
      favorites = storedFavorites ? JSON.parse(storedFavorites) : [];
      if (!Array.isArray(favorites)) {
        favorites = [];
        localStorage.setItem('favorites', JSON.stringify(favorites));
      }
    } catch (error) {
      console.error('Error loading favorites from localStorage:', error);
      favorites = [];
      localStorage.setItem('favorites', JSON.stringify(favorites));
    }

    function applyFilters() {
      try {
        const searchQuery = document.getElementById('searchBar')?.value.toLowerCase() || '';
        const platform = document.getElementById('platform')?.value || 'all';
        const genre = document.getElementById('genre')?.value || 'all';
        const showFavorites = document.getElementById('favorites')?.value || 'all';
        const sort = document.getElementById('sort')?.value || 'title-asc';

        filteredGames = games.filter(game => {
          const searchMatch = game.title.toLowerCase().includes(searchQuery);
          const platformMatch = platform === 'all' || game.platform.toLowerCase() === platform;
          const genreMatch = genre === 'all' || game.genre.toLowerCase() === genre;
          const favoriteMatch = showFavorites === 'all' || favorites.includes(game.title);
          return searchMatch && platformMatch && genreMatch && favoriteMatch;
        });

        filteredGames.sort((a, b) => {
          const [sortField, sortDirection] = sort.split('-');
          const fieldA = a[sortField]?.toLowerCase() || '';
          const fieldB = b[sortField]?.toLowerCase() || '';
          if (sortDirection === 'asc') {
            return fieldA > fieldB ? 1 : -1;
          } else {
            return fieldA < fieldB ? 1 : -1;
          }
        });

        currentPage = 1;
        renderGames();
      } catch (error) {
        console.error('Error applying filters:', error);
        document.getElementById('gameGrid').innerHTML = '<p class="error-message">An error occurred while filtering games. Please try again.</p>';
      }
    }

    function renderGames() {
      const gameGrid = document.getElementById('gameGrid');
      if (!gameGrid) {
        console.error('Game grid element not found');
        return;
      }
      gameGrid.innerHTML = '';

      try {
        const start = (currentPage - 1) * gamesPerPage;
        const end = start + gamesPerPage;
        const gamesToShow = filteredGames.slice(start, end);

        if (gamesToShow.length === 0) {
          gameGrid.innerHTML = '<p class="error-message">No games found for the selected filters.</p>';
          updatePagination();
          return;
        }

        gamesToShow.forEach((game, index) => {
          const gameCard = document.createElement('div');
          gameCard.classList.add('game-card');
          gameCard.style.setProperty('--index', index);
          const isFavorited = favorites.includes(game.title);
          gameCard.innerHTML = `
            <button class="favorite-button ${isFavorited ? 'favorited' : ''}" onclick="toggleFavorite('${game.title}', this)">★</button>
            <h2>${game.title}</h2>
            <p><strong>Platform:</strong> ${game.platform}</p>
            <p><strong>Genre:</strong> ${game.genre}</p>
            <a href="${game.path}" class="play-button" target="_blank">Play</a>
          `;
          gameGrid.appendChild(gameCard);
        });

        updatePagination();
      } catch (error) {
        console.error('Error rendering games:', error);
        gameGrid.innerHTML = '<p class="error-message">An error occurred while loading games. Please try again later.</p>';
      }
    }

    function toggleFavorite(title, button) {
      try {
        if (favorites.includes(title)) {
          favorites = favorites.filter(t => t !== title);
          button.classList.remove('favorited');
        } else {
          favorites.push(title);
          button.classList.add('favorited');
        }
        localStorage.setItem('favorites', JSON.stringify(favorites));
        applyFilters();
      } catch (error) {
        console.error('Error toggling favorite:', error);
      }
    }

    function updatePagination() {
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      const pageInfo = document.getElementById('pageInfo');
      if (!prevBtn || !nextBtn || !pageInfo) {
        console.error('Pagination elements not found');
        return;
      }

      const totalPages = Math.ceil(filteredGames.length / gamesPerPage);
      prevBtn.disabled = currentPage === 1;
      nextBtn.disabled = currentPage === totalPages || filteredGames.length === 0;
      pageInfo.textContent = `Page ${currentPage} of ${totalPages || 1}`;
    }

    function prevPage() {
      if (currentPage > 1) {
        currentPage--;
        renderGames();
      }
    }

    function nextPage() {
      const totalPages = Math.ceil(filteredGames.length / gamesPerPage);
      if (currentPage < totalPages) {
        currentPage++;
        renderGames();
      }
    }

    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // Add keyboard navigation for pagination
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowLeft') prevPage();
      if (e.key === 'ArrowRight') nextPage();
    });

    // Show/Hide Back to Top button
    window.addEventListener('scroll', () => {
      const backToTop = document.getElementById('backToTop');
      if (backToTop) {
        if (window.scrollY > 300) {
          backToTop.classList.add('visible');
        } else {
          backToTop.classList.remove('visible');
        }
      }
    });

    // Purple Shooting Stars Animation with optimization
    const starsContainer = document.querySelector('.stars');
    const maxStars = 50; // Limit the number of stars
    let starCount = 0;

    function createStar() {
      if (starCount >= maxStars) return;

      const star = document.createElement('div');
      star.className = 'star';
      const x = Math.random() * 100;
      const duration = Math.random() * 1.5 + 1;
      star.style.left = `${x}%`;
      star.style.top = `${Math.random() * 100}%`;
      star.style.animation = `shoot ${duration}s linear forwards`;
      starsContainer.appendChild(star);
      starCount++;

      setTimeout(() => {
        star.remove();
        starCount--;
      }, duration * 1000);
    }

    const styleSheet = document.styleSheets[0];
    styleSheet.insertRule(`
      @keyframes shoot {
        0% { transform: translateX(0) translateY(0); opacity: 1; }
        100% { transform: translateX(-100vw) translateY(100vh); opacity: 0; }
      }
    `, styleSheet.cssRules.length);

    setInterval(createStar, 300); // Reduced frequency for better performance

    // Initial render
    renderGames();
  </script>
</body>
</html>